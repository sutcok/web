<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>表单提交页面</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: "Microsoft YaHei", sans-serif;
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
        }
        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background-color: #f1f1f1;
            border: 1px solid #ddd;
            border-bottom: none;
            margin-right: 5px;
            border-radius: 5px 5px 0 0;
        }
        .tab.active {
            background-color: #fff;
            border-bottom: 1px solid #fff;
            margin-bottom: -1px;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        form {
            display: flex;
            flex-direction: column;
        }
        label {
            margin-top: 10px;
            font-weight: bold;
        }
        input, textarea, select {
            padding: 8px;
            margin-top: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            margin-top: 20px;
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        .nav-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .nav-button {
            padding: 10px;
            background-color: #2196F3;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .nav-button:hover {
            background-color: #0b7dda;
        }
        .response-container {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            max-height: 300px;
            overflow-y: auto;
        }
        .success-message {
            color: #28a745;
            font-weight: bold;
            margin-top: 10px;
        }
        .error-message {
            color: #dc3545;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="tabs">
        <div class="tab active" data-tab="formTab1">喜欢关键词</div>
        <div class="tab" data-tab="formTab2">讨厌关键词</div>
        <div class="tab" data-tab="navTab">导航按钮页</div>
    </div>

    <!-- 表单提交页1 -->
    <div id="formTab1" class="tab-content active">
        <h2>喜欢词组设定</h2>
        <form id="form1">
            <select id="issueId1" name="issueId">
                <option value="ICDSK6">快手</option>
            </select>
            <!-- 新增下拉列表框 -->
            <select id="keywordSelect1">
                <option value="">-- 快速选择(常用词) --</option>
                <option value="下单/支付/包邮/购物/去看直播/直播中/抢购/购买/旗舰店/专卖店/个体店/企业店/小店/包邮/热卖/卖货/立抢/爆款/如何省钱/直播间告诉你/实惠价格/点击进入直播/退货/运费/严选/坏了包/已售.+件/破损/无理由/包退/晚发/立赔">商品购物</option>
                <option value="捕/鱼/大咖/鱼乐/达人/三人行/老六/乡村/狠小志">捕鱼游戏</option>
                <option value="爆款游戏.*捕鱼大咖/捕鱼大咖.*爆款游戏/老六.*捕鱼大咖">指定捕鱼广告</option>
            </select>
            <label for="body1">内容：</label>
            <textarea id="body1" name="body" rows="6" placeholder="词组填写示例：立即购买/立即抢购/了解详情"></textarea>
            
            <button type="submit">提交词组</button>
        </form>
    </div>

    <!-- 表单提交页2 -->
    <div id="formTab2" class="tab-content">
        <h2>讨厌词组设定</h2>
        <form id="form2">
            <select id="issueId2" name="issueId">
                <option value="ICDT98">快手</option>
            </select>
            <!-- 新增下拉列表框 -->
            <select id="keywordSelect2">
                <option value="">-- 快速选择(常用词) --</option>
                <option value="跳转微信/点我玩玩/试玩游戏/立即试玩/点击即玩/去玩游戏/点击立玩/跳转游戏/无需下载/无需安装/短剧/剧场/新剧/免费观看/热播剧/下一集/立即观看/继续观看/观看全集/观看更多/几集/题材/剧情/免费看视频/抢先看/看全集/超级汇/珠海小叮当/点击额外获取.+金币">自定义词组</option>
            </select>
            <label for="body2">内容：</label>
            <textarea id="body2" name="body" rows="6" placeholder="词组填写示例：立即购买/立即抢购/了解详情"></textarea>
            
            <button type="submit">提交词组</button>
        </form>
    </div>

    <!-- 导航按钮页 -->
    <div id="navTab" class="tab-content">
        <h2>导航按钮</h2>
        <div class="nav-buttons">
            <button class="nav-button" onclick="navigateTo('https://gitee.com/sutcok/input/issues')">查看所有人的词组</button>
            <button class="nav-button" onclick="navigateTo('https://www.123865.com/s/YHB7Vv-6vBsA')">123云盘资源</button>
            <button class="nav-button" onclick="navigateTo('https://share.feijipan.com/s/dDGrC7rQ')">下载脚本(飞机盘)</button>
            <button class="nav-button" onclick="navigateTo('https://www.wenshushu.cn')">文叔叔(文件上传)</button>
            <button class="nav-button" onclick="navigateTo('https://gitee.com/sutcok/faq/issues/ICBTVH')">新手疑难杂症</button>
            <button class="nav-button" onclick="navigateTo('https://gitee.com/sutcok/chaojihe/blob/master/top.html')">金币记录排行榜</button>
        </div>
    </div>

    <!-- 响应内容显示区域 -->
    <div id="responseContainer" class="response-container" style="display: none;">
        <h3>服务器响应：</h3>
        <pre id="responseContent"></pre>
        <div id="idDisplay" style="margin-top: 10px; font-weight: bold;"></div>
        <div id="successMessage" class="success-message"></div>
        <div id="errorMessage" class="error-message"></div>
    </div>

    <script>
        // 标签页切换功能
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.getAttribute('data-tab');
                
                // 移除所有标签页和内容的active类
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                
                // 添加active类到当前标签页和内容
                tab.classList.add('active');
                document.getElementById(tabId).classList.add('active');
                
                // 切换标签页时清除响应提示
                clearResponse();
            });
        });

        // 清除响应提示的函数
        function clearResponse() {
            const responseContainer = document.getElementById('responseContainer');
            const responseContent = document.getElementById('responseContent');
            const idDisplay = document.getElementById('idDisplay');
            const successMessage = document.getElementById('successMessage');
            const errorMessage = document.getElementById('errorMessage');
            
            // 隐藏响应容器
            responseContainer.style.display = 'none';
            
            // 清空内容
            responseContent.textContent = '';
            idDisplay.textContent = '';
            successMessage.textContent = '';
            errorMessage.textContent = '';
        }

        // 表单1提交处理
        document.getElementById('form1').addEventListener('submit', function(e) {
            e.preventDefault();
            const issueId = document.getElementById('issueId1').value;
            const apiUrl = `https://gitee.com/api/v5/repos/sutcok/input/issues/${issueId}/comments`;
            submitForm(this, apiUrl, '表单1');
        });

        // 表单2提交处理
        document.getElementById('form2').addEventListener('submit', function(e) {
            e.preventDefault();
            const issueId = document.getElementById('issueId2').value;
            const apiUrl = `https://gitee.com/api/v5/repos/sutcok/input/issues/${issueId}/comments`;
            submitForm(this, apiUrl, '表单2');
        });

        // 通用表单提交函数
        function submitForm(form, apiUrl, formName) {
            // 获取表单数据并转换为JSON
            const formData = new FormData(form);
            const jsonData = {
                access_token: "7819316f61b2294e59a2c3dd557d542c", // 固定值
                body: formData.get('body') // 用户输入的内容
            };
            
            // 发送POST请求
            fetch(apiUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(jsonData)
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('网络响应不正常');
                }
                return response.json();
            })
            .then(data => {
                console.log('提交成功:', data);
                // 处理响应数据
                handleResponse(data, formName);
            })
            .catch(error => {
                console.error('提交失败:', error);
                showError('Sorry，提交失败，请联系作者处理！', formName);
            });
        }

        // 处理响应数据
        function handleResponse(data, formName) {
            const responseContainer = document.getElementById('responseContainer');
            const idDisplay = document.getElementById('idDisplay');
            const successMessage = document.getElementById('successMessage');
            const errorMessage = document.getElementById('errorMessage');
            
            // 清空之前的内容
            successMessage.textContent = '';
            errorMessage.textContent = '';
            
            // 检查是否有id字段
            if (data && data.id) {
                // 显示id
                idDisplay.textContent = `生成脚本专用ID词成功，ID为：${data.id}`;
                
                // 显示成功消息
                successMessage.textContent = '请在脚本关键词输入框填写该ID即可';
                
                // 显示响应容器
                responseContainer.style.display = 'block';
            } else {
                // 没有id或响应格式不正确
                showError('Sorry，提交失败，请联系作者处理！', formName);
            }
        }

        // 显示错误信息
        function showError(message, formName) {
            const responseContainer = document.getElementById('responseContainer');
            const errorMessage = document.getElementById('errorMessage');
            
            // 清空之前的内容
            document.getElementById('responseContent').textContent = '';
            document.getElementById('idDisplay').textContent = '';
            document.getElementById('successMessage').textContent = '';
            
            // 显示错误信息
            errorMessage.textContent = message;
            responseContainer.style.display = 'block';
        }

        // 导航按钮跳转函数
        function navigateTo(url) {
            window.location.href = url;
        }
        
        // 为表单1的下拉框添加事件监听
        document.getElementById('keywordSelect1').addEventListener('change', function() {
            const selectedValue = this.value;
            if (selectedValue) {
                document.getElementById('body1').value = selectedValue;
            }
        });
        
        // 为表单2的下拉框添加事件监听
        document.getElementById('keywordSelect2').addEventListener('change', function() {
            const selectedValue = this.value;
            if (selectedValue) {
                document.getElementById('body2').value = selectedValue;
            }
        });
    </script>
</body>
</html>
