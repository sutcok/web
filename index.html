<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¶…é›†åˆåœ¨çº¿Web</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: "Microsoft YaHei", sans-serif;
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
        }
        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background-color: #f1f1f1;
            border: 1px solid #ddd;
            border-bottom: none;
            margin-right: 5px;
            border-radius: 5px 5px 0 0;
        }
        .tab.active {
            background-color: #fff;
            border-bottom: 1px solid #fff;
            margin-bottom: -1px;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        form {
            display: flex;
            flex-direction: column;
        }
        label {
            margin-top: 10px;
            font-weight: bold;
        }
        input, textarea, select {
            padding: 8px;
            margin-top: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            margin-top: 20px;
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        .nav-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .nav-button {
            padding: 10px;
            background-color: #2196F3;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .nav-button:hover {
            background-color: #0b7dda;
        }
        .response-container {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            max-height: 300px;
            overflow-y: auto;
        }
        .success-message {
            color: #28a745;
            font-weight: bold;
            margin-top: 10px;
        }
        .error-message {
            color: #dc3545;
            margin-top: 10px;
        }
        
        /* æ–°å¢ï¼šç­‰å¾…æç¤ºçš„æ ·å¼ - æ‚¬æµ®åœ¨è¾“å…¥æ¡†é™„è¿‘ */
        .input-loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.3);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            display: none; /* é»˜è®¤éšè— */
        }
        .input-loading-message {
            background-color: #fff;
            padding: 10px 20px;
            border-radius: 4px;
            font-size: 14px;
            color: #333;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            max-width: 80%;
            text-align: center;
            border: 1px solid #e0e0e0;
        }
        
        /* æ–°å¢ï¼šç©ºè¾“å…¥æç¤ºçš„æ ·å¼ - ä½¿ç”¨é»˜è®¤é»‘è‰²æ–‡å­— */
        .empty-input-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.3);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1001;
            display: none; /* é»˜è®¤éšè— */
        }
        .empty-input-message {
            background-color: #fff;
            padding: 15px 25px;
            border-radius: 4px;
            font-size: 16px;
            color: black; /* æ˜ç¡®è®¾ç½®ä¸ºé»‘è‰² */
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            max-width: 80%;
            text-align: center;
            border: 1px solid #e0e0e0;
        }
        
        /* æ–°å¢ï¼šæ ¼å¼é”™è¯¯æç¤ºçš„æ ·å¼ - ä¸ç©ºè¾“å…¥æç¤ºç›¸åŒæ ·å¼ */
        .format-error-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.3);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1002;
            display: none; /* é»˜è®¤éšè— */
        }
        .format-error-message {
            background-color: #fff;
            padding: 15px 25px;
            border-radius: 4px;
            font-size: 16px;
            color: black; /* æ˜ç¡®è®¾ç½®ä¸ºé»‘è‰² */
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            max-width: 80%;
            text-align: center;
            border: 1px solid #e0e0e0;
        }
        
         /* äºŒç»´ç æ‚¬æµ®å±‚æ ·å¼ */
        .qrcode-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        .qrcode-container {
            background-color: white;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            text-align: center;
        }
        .qrcode-container img {
            max-width: 200px;
            max-height: 200px;
        }
    </style>
</head>
<body>
    <div class="tabs">
        <div class="tab active" data-tab="formTab1">å–œæ¬¢å…³é”®è¯</div>
        <div class="tab" data-tab="formTab2">è®¨åŒå…³é”®è¯</div>
        <div class="tab" data-tab="formTab3">Sptå¯†é’¥</div>
        <div class="tab" data-tab="navTab">å¯¼èˆªæŒ‰é’®é¡µ</div>
    </div>

    <!-- è¡¨å•æäº¤é¡µ1 - å–œæ¬¢å…³é”®è¯ -->
    <div id="formTab1" class="tab-content active">
        <h2>å–œæ¬¢è¯ç»„è®¾å®š</h2>
        <form id="form1">
            <!-- ä¿®æ”¹ä¸ºå¯ç¼–è¾‘çŠ¶æ€ï¼Œç§»é™¤åªè¯»å±æ€§ -->
            <label for="sbid1">è®¾å¤‡idï¼š</label>
            <input type="text" id="sbid1" name="sbid" value="noid" style="background-color: #f1f1f1; cursor: default;">
            
            <select id="issueId1" name="issueId">
                <option value="ICDSK6">å¿«æ‰‹</option>
            </select>
            <select id="keywordSelect1">
                <option value="">-- å¿«é€Ÿé€‰æ‹©(å¸¸ç”¨è¯) --</option>
                <option value="ä¸‹å•/æ”¯ä»˜/åŒ…é‚®/è´­ç‰©/å»çœ‹ç›´æ’­/ç›´æ’­ä¸­/æŠ¢è´­/è´­ä¹°/æ——èˆ°åº—/ä¸“å–åº—/ä¸ªä½“åº—/ä¼ä¸šåº—/å°åº—/åŒ…é‚®/çƒ­å–/å–è´§/ç«‹æŠ¢/çˆ†æ¬¾/å¦‚ä½•çœé’±/ç›´æ’­é—´å‘Šè¯‰ä½ /å®æƒ ä»·æ ¼/ç‚¹å‡»è¿›å…¥ç›´æ’­/é€€è´§/è¿è´¹/ä¸¥é€‰/åäº†åŒ…/å·²å”®.+ä»¶/ç ´æŸ/æ— ç†ç”±/åŒ…é€€/æ™šå‘/ç«‹èµ”">å•†å“è´­ç‰©</option>
                <option value="æ•/é±¼/å¤§å’–/é±¼ä¹/è¾¾äºº/ä¸‰äººè¡Œ/è€å…­/ä¹¡æ‘/ç‹ å°å¿—">æ•é±¼æ¸¸æˆ</option>
                <option value="çˆ†æ¬¾æ¸¸æˆ.*æ•é±¼å¤§å’–/æ•é±¼å¤§å’–.*çˆ†æ¬¾æ¸¸æˆ/è€å…­.*æ•é±¼å¤§å’–">æŒ‡å®šæ•é±¼å¹¿å‘Š</option>
            </select>
            <label for="body1">å†…å®¹ï¼š</label>
            <textarea id="body1" name="body" rows="6" placeholder="è¯ç»„å¡«å†™ç¤ºä¾‹ï¼šç«‹å³è´­ä¹°/ç«‹å³æŠ¢è´­/äº†è§£è¯¦æƒ…"></textarea>
            
            <button type="submit">æäº¤ç”ŸæˆID</button>
        </form>
    </div>

    <!-- è¡¨å•æäº¤é¡µ2 - è®¨åŒå…³é”®è¯ -->
    <div id="formTab2" class="tab-content">
        <h2>è®¨åŒè¯ç»„è®¾å®š</h2>
        <form id="form2">
            <!-- ä¿®æ”¹ä¸ºå¯ç¼–è¾‘çŠ¶æ€ï¼Œç§»é™¤åªè¯»å±æ€§ -->
            <label for="sbid2">è®¾å¤‡idï¼š</label>
            <input type="text" id="sbid2" name="sbid" value="noid" style="background-color: #f1f1f1; cursor: default;">
            
            <select id="issueId2" name="issueId">
                <option value="ICDT98">å¿«æ‰‹</option>
            </select>
            <select id="keywordSelect2">
                <option value="">-- å¿«é€Ÿé€‰æ‹©(å¸¸ç”¨è¯) --</option>
                <option value="è·³è½¬å¾®ä¿¡/ç‚¹æˆ‘ç©ç©/è¯•ç©æ¸¸æˆ/ç«‹å³è¯•ç©/ç‚¹å‡»å³ç©/å»ç©æ¸¸æˆ/ç‚¹å‡»ç«‹ç©/è·³è½¬æ¸¸æˆ/æ— éœ€ä¸‹è½½/æ— éœ€å®‰è£…/çŸ­å‰§/å‰§åœº/æ–°å‰§/å…è´¹è§‚çœ‹/çƒ­æ’­å‰§/ä¸‹ä¸€é›†/ç«‹å³è§‚çœ‹/ç»§ç»­è§‚çœ‹/è§‚çœ‹å…¨é›†/è§‚çœ‹æ›´å¤š/å‡ é›†/é¢˜æ/å‰§æƒ…/å…è´¹çœ‹è§†é¢‘/æŠ¢å…ˆçœ‹/çœ‹å…¨é›†/è¶…çº§æ±‡/ç æµ·å°å®å½“/ç‚¹å‡»é¢å¤–è·å–.+é‡‘å¸">è‡ªå®šä¹‰è¯ç»„</option>
            </select>
            <label for="body2">å†…å®¹ï¼š</label>
            <textarea id="body2" name="body" rows="6" placeholder="è¯ç»„å¡«å†™ç¤ºä¾‹ï¼šç«‹å³è´­ä¹°/ç«‹å³æŠ¢è´­/äº†è§£è¯¦æƒ…"></textarea>
            
            <button type="submit">æäº¤ç”ŸæˆID</button>
        </form>
    </div>

    <!-- æ–°å¢çš„è¡¨å•æäº¤é¡µ3 - Sptå¯†é’¥ -->
    <div id="formTab3" class="tab-content">
        <h2>Sptå¯†é’¥è®¾å®š</h2>
        <form id="form3">
            <!-- ä¿®æ”¹ä¸ºå¯ç¼–è¾‘çŠ¶æ€ï¼Œç§»é™¤åªè¯»å±æ€§ -->
            <label for="sbid3">è®¾å¤‡idï¼š</label>
            <input type="text" id="sbid3" name="sbid" value="noid" style="background-color: #f1f1f1; cursor: default;">
            
            <select id="issueId3" name="issueId">
                <option value="ICE5C7">Spt</option>
            </select>
            <label for="body3">å†…å®¹ï¼š</label>
            <textarea id="body3" name="body" rows="6" placeholder="å¯†é’¥å¡«å†™ç¤ºä¾‹ï¼šSPT_XXXXXXXXXXX"></textarea>
            
            <button type="submit">æäº¤ç”ŸæˆID</button>
        </form>
    </div>

    <!-- å¯¼èˆªæŒ‰é’®é¡µ -->
    <div id="navTab" class="tab-content">
        <h2>å¯¼èˆªæŒ‰é’®</h2>
        <div class="nav-buttons">
            <button class="nav-button" onclick="navigateTo('https://gitee.com/sutcok/faq/issues/ICBTVH')">ç–‘éš¾æ‚ç—‡(è„šæœ¬é—®é¢˜)</button>
             <!-- æ–°å¢çš„äºŒç»´ç æŒ‰é’® -->
            <button class="nav-button" id="showQrcodeBtn">å¾®ä¿¡ç¾¤-å¹æ°´è£…é€¼ğŸ’¥(æ‰«ç ç‚¹æˆ‘)</button>
            <button class="nav-button" onclick="navigateTo('https://gitee.com/sutcok/input/issues')">æŸ¥çœ‹å·²ç”Ÿæˆçš„IDè¯</button>
            <button class="nav-button" onclick="navigateTo('https://www.123865.com/s/YHB7Vv-6vBsA')">123äº‘ç›˜èµ„æº</button>
            <button class="nav-button" onclick="navigateTo('https://share.feijipan.com/s/dDGrC7rQ')">ä¸‹è½½è„šæœ¬(é£æœºç›˜)</button>
            <button class="nav-button" onclick="navigateTo('https://www.wenshushu.cn')">æ–‡å”å”(æ–‡ä»¶ä¸Šä¼ )</button>
            <button class="nav-button" onclick="navigateTo('https://gitee.com/sutcok/chaojihe/blob/master/top.html')">é‡‘å¸è®°å½•æ’è¡Œæ¦œ</button>
            <button class="nav-button" onclick="navigateTo('https://wxpusher.zjiecode.com/api/qrcode/RwjGLMOPTYp35zSYQr0HxbCPrV9eU0wKVBXU1D5VVtya0cQXEJWPjqBdW3gKLifS.jpg')">åœ¨çº¿ç”³è¯·Sptå¯†é’¥(å¾®é€šçŸ¥)</button>
        </div>
    </div>

    <!-- äºŒç»´ç æ‚¬æµ®å±‚ -->
    <div class="qrcode-overlay" id="qrcodeOverlay">
        <div class="qrcode-container">
            <img src="https://gitee.com/sutcok/chaojihe/raw/master/ee.png" alt="äºŒç»´ç ">
        </div>
    </div>

    <!-- å“åº”å†…å®¹æ˜¾ç¤ºåŒºåŸŸ -->
    <div id="responseContainer" class="response-container" style="display: none;">
        <h3>æœåŠ¡å™¨å“åº”ï¼š</h3>
        <pre id="responseContent"></pre>
        <div id="idDisplay" style="margin-top: 10px; font-weight: bold;"></div>
        <div id="successMessage" class="success-message"></div>
        <div id="errorMessage" class="error-message"></div>
    </div>

    <!-- æ–°å¢ï¼šç­‰å¾…æç¤ºçš„HTMLç»“æ„ - æ‚¬æµ®åœ¨è¾“å…¥æ¡†é™„è¿‘ -->
    <div class="input-loading-overlay" id="inputLoadingOverlay">
        <div class="input-loading-message">
            æ­£åœ¨æäº¤ï¼Œè¯·è€å¿ƒç­‰å¾…...
        </div>
    </div>
    
    <!-- æ–°å¢ï¼šç©ºè¾“å…¥æç¤ºçš„HTMLç»“æ„ -->
    <div class="empty-input-overlay" id="emptyInputOverlay">
        <div class="empty-input-message">
            å†…å®¹ä¸èƒ½ä¸ºç©ºï¼Œè¯·é‡æ–°å¡«å†™ï¼
        </div>
    </div>
    
    <!-- æ–°å¢ï¼šæ ¼å¼é”™è¯¯æç¤ºçš„HTMLç»“æ„ -->
    <div class="format-error-overlay" id="formatErrorOverlay">
        <div class="format-error-message">
            SPTæ ¼å¼é”™è¯¯ï¼Œè¯·é‡æ–°å¡«å†™
        </div>
    </div>

    <script>
        // è·å–URLä¸­çš„sbidå‚æ•°å€¼ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿”å›noid
        function getSbidFromUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('sbid') || 'noid';
        }

        // æ ‡ç­¾é¡µåˆ‡æ¢åŠŸèƒ½
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.getAttribute('data-tab');
                
                // ç§»é™¤æ‰€æœ‰æ ‡ç­¾é¡µå’Œå†…å®¹çš„activeç±»
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                
                // æ·»åŠ activeç±»åˆ°å½“å‰æ ‡ç­¾é¡µå’Œå†…å®¹
                tab.classList.add('active');
                document.getElementById(tabId).classList.add('active');
                
                // åˆ‡æ¢æ ‡ç­¾é¡µæ—¶æ¸…é™¤å“åº”æç¤º
                clearResponse();
            });
        });

        // æ¸…é™¤å“åº”æç¤ºçš„å‡½æ•°
        function clearResponse() {
            const responseContainer = document.getElementById('responseContainer');
            const responseContent = document.getElementById('responseContent');
            const idDisplay = document.getElementById('idDisplay');
            const successMessage = document.getElementById('successMessage');
            const errorMessage = document.getElementById('errorMessage');
            const formatErrorOverlay = document.getElementById('formatErrorOverlay');
            
            // éšè—å“åº”å®¹å™¨
            responseContainer.style.display = 'none';
            formatErrorOverlay.style.display = 'none';
            
            // æ¸…ç©ºå†…å®¹
            responseContent.textContent = '';
            idDisplay.textContent = '';
            successMessage.textContent = '';
            errorMessage.textContent = '';
        }

        // è¡¨å•1æäº¤å¤„ç†
        document.getElementById('form1').addEventListener('submit', function(e) {
            e.preventDefault();
            const issueId = document.getElementById('issueId1').value;
            const bodyContent = document.getElementById('body1').value;
            
            // æ£€æŸ¥è¾“å…¥æ¡†æ˜¯å¦ä¸ºç©º
            if (!bodyContent.trim()) {
                showEmptyInputMessage();
                return;
            }
            
            // è·å–sbidå€¼
            const sbidValue = document.getElementById('sbid1').value;
            
            // å¤„ç†ç‰¹æ®Šè¯ç»„
            const processedBody = processSpecialWords(bodyContent);
            
            // æ‹¼æ¥sbidå’ŒbodyContent
            const finalContent = `${sbidValue}---${processedBody}`;
            
            // æäº¤è¡¨å•
            submitForm(this, `https://gitee.com/api/v5/repos/sutcok/input/issues/${issueId}/comments`, 'è¡¨å•1', finalContent);
        });

        // è¡¨å•2æäº¤å¤„ç†
        document.getElementById('form2').addEventListener('submit', function(e) {
            e.preventDefault();
            const issueId = document.getElementById('issueId2').value;
            const bodyContent = document.getElementById('body2').value;
            
            // æ£€æŸ¥è¾“å…¥æ¡†æ˜¯å¦ä¸ºç©º
            if (!bodyContent.trim()) {
                showEmptyInputMessage();
                return;
            }
            
            // è·å–sbidå€¼
            const sbidValue = document.getElementById('sbid2').value;
            
            // å¤„ç†ç‰¹æ®Šè¯ç»„
            const processedBody = processSpecialWords(bodyContent);
            
            // æ‹¼æ¥sbidå’ŒbodyContent
            const finalContent = `${sbidValue}---${processedBody}`;
            
            // æäº¤è¡¨å•
            submitForm(this, `https://gitee.com/api/v5/repos/sutcok/input/issues/${issueId}/comments`, 'è¡¨å•2', finalContent);
        });

        // è¡¨å•3æäº¤å¤„ç†
        document.getElementById('form3').addEventListener('submit', function(e) {
            e.preventDefault();
            const issueId = document.getElementById('issueId3').value;
            const bodyContent = document.getElementById('body3').value;
            
            // æ£€æŸ¥è¾“å…¥æ¡†æ˜¯å¦ä¸ºç©º
            if (!bodyContent.trim()) {
                showEmptyInputMessage();
                return;
            }
            
            // æ£€æŸ¥SPTæ ¼å¼
            if (!bodyContent.startsWith('SPT')) {
                showFormatErrorMessage();
                return;
            }
            
            // è·å–sbidå€¼
            const sbidValue = document.getElementById('sbid3').value;
            
            // å¤„ç†ç‰¹æ®Šè¯ç»„
            const processedBody = processSpecialWords(bodyContent);
            
            // æ‹¼æ¥sbidå’ŒbodyContent
            const finalContent = `${sbidValue}---${processedBody}`;
            
            // æäº¤è¡¨å•
            submitForm(this, `https://gitee.com/api/v5/repos/sutcok/input/issues/${issueId}/comments`, 'è¡¨å•3', finalContent);
        });

        // å¤„ç†ç‰¹æ®Šè¯ç»„çš„å‡½æ•°
        function processSpecialWords(text) {
            // 1. åˆ é™¤æ‰€æœ‰ç©ºæ ¼
            text = text.replace(/\s+/g, '');
            
            // 2. å¤„ç†ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯"/"çš„æƒ…å†µ
            if (text.startsWith('/')) {
                text = text.substring(1);
            }
            
            // 3. å¤„ç†æœ€åä¸€ä¸ªå­—ç¬¦æ˜¯"/"çš„æƒ…å†µ
            if (text.endsWith('/')) {
                text = text.substring(0, text.length - 1);
            }
            
            // 4. å¤„ç†ä¸­é—´çš„"//"æ›¿æ¢ä¸º"/"
            text = text.replace(/\/\//g, '/');
            
            // 5. å¤„ç†"æ•é±¼"å’Œ"ä¼ å¥‡"çš„æ›¿æ¢
            text = text.replace(/æ•é±¼/g, 'æ•=é±¼');
            text = text.replace(/ä¼ å¥‡/g, 'ä¼ =å¥‡');
            
            return text;
        }

        // æ˜¾ç¤ºç©ºè¾“å…¥æç¤ºçš„å‡½æ•°
        function showEmptyInputMessage() {
            const emptyInputOverlay = document.getElementById('emptyInputOverlay');
            emptyInputOverlay.style.display = 'flex';
            
            // 2ç§’åè‡ªåŠ¨æ¶ˆå¤±
            setTimeout(() => {
                emptyInputOverlay.style.display = 'none';
            }, 2000); // 2000æ¯«ç§’ = 2ç§’
        }

        // æ˜¾ç¤ºæ ¼å¼é”™è¯¯æç¤ºçš„å‡½æ•°
        function showFormatErrorMessage() {
            const formatErrorOverlay = document.getElementById('formatErrorOverlay');
            formatErrorOverlay.style.display = 'flex';
            
            // 2ç§’åè‡ªåŠ¨æ¶ˆå¤±
            setTimeout(() => {
                formatErrorOverlay.style.display = 'none';
            }, 2000); // 2000æ¯«ç§’ = 2ç§’
        }

        // é€šç”¨è¡¨å•æäº¤å‡½æ•°
        function submitForm(form, apiUrl, formName, bodyContent) {
            // æ˜¾ç¤º"è€å¿ƒç­‰å¾…"æç¤º - æ‚¬æµ®åœ¨è¾“å…¥æ¡†é™„è¿‘
            const inputLoadingOverlay = document.getElementById('inputLoadingOverlay');
            
            // æ¸…ç©ºä¹‹å‰çš„å†…å®¹
            const responseContainer = document.getElementById('responseContainer');
            const responseContent = document.getElementById('responseContent');
            const idDisplay = document.getElementById('idDisplay');
            const successMessage = document.getElementById('successMessage');
            const errorMessage = document.getElementById('errorMessage');
            
            successMessage.textContent = '';
            errorMessage.textContent = '';
            idDisplay.textContent = '';
            
            // æ˜¾ç¤ºç­‰å¾…æç¤º
            inputLoadingOverlay.style.display = 'flex';
            
            // å‘é€POSTè¯·æ±‚
            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), 10000); // 10ç§’è¶…æ—¶
            
            fetch(apiUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    access_token: "7819316f61b2294e59a2c3dd557d542c", // å›ºå®šå€¼
                    body: bodyContent // ä½¿ç”¨æ‹¼æ¥åçš„å†…å®¹
                }),
                signal: controller.signal
            })
            .then(response => {
                clearTimeout(timeoutId); // æ¸…é™¤è¶…æ—¶è®¡æ—¶å™¨
                
                if (!response.ok) {
                    throw new Error('ç½‘ç»œå“åº”ä¸æ­£å¸¸');
                }
                return response.json();
            })
            .then(data => {
                console.log('æäº¤æˆåŠŸ:', data);
                // å¤„ç†å“åº”æ•°æ®
                handleResponse(data, formName);
            })
            .catch(error => {
                console.error('æäº¤å¤±è´¥:', error);
                if (error.name === 'AbortError') {
                    showError('æäº¤è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–ç¨åé‡è¯•ï¼', formName);
                } else {
                    showError('Sorryï¼Œæäº¤å¤±è´¥ï¼Œè¯·è”ç³»ä½œè€…å¤„ç†ï¼', formName);
                }
            })
            .finally(() => {
                // æ— è®ºæˆåŠŸå¤±è´¥éƒ½éšè—ç­‰å¾…æç¤º
                inputLoadingOverlay.style.display = 'none';
            });
        }

        // å¤„ç†å“åº”æ•°æ®
        function handleResponse(data, formName) {
            const responseContainer = document.getElementById('responseContainer');
            const idDisplay = document.getElementById('idDisplay');
            const successMessage = document.getElementById('successMessage');
            const errorMessage = document.getElementById('errorMessage');
            
            // æ¸…ç©ºä¹‹å‰çš„å†…å®¹
            successMessage.textContent = '';
            errorMessage.textContent = '';
            
            // æ£€æŸ¥æ˜¯å¦æœ‰idå­—æ®µ
            if (data && data.id) {
                // æ˜¾ç¤ºid
                idDisplay.textContent = `ç”Ÿæˆè„šæœ¬ä¸“ç”¨IDè¯æˆåŠŸï¼ŒIDä¸ºï¼š${data.id}`;
                
                // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
                successMessage.textContent = 'è¯·åœ¨è„šæœ¬Uiå¯¹åº”çš„è¾“å…¥æ¡†å¡«å†™è¯¥IDå³å¯';
                
                // æ˜¾ç¤ºå“åº”å®¹å™¨
                responseContainer.style.display = 'block';
            } else {
                // æ²¡æœ‰idæˆ–å“åº”æ ¼å¼ä¸æ­£ç¡®
                showError('Sorryï¼Œæäº¤å¤±è´¥ï¼Œè¯·è”ç³»ä½œè€…å¤„ç†ï¼', formName);
            }
        }

        // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
        function showError(message, formName) {
            const responseContainer = document.getElementById('responseContainer');
            const errorMessage = document.getElementById('errorMessage');
            
            // æ¸…ç©ºä¹‹å‰çš„å†…å®¹
            document.getElementById('responseContent').textContent = '';
            document.getElementById('idDisplay').textContent = '';
            document.getElementById('successMessage').textContent = '';
            
            // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
            errorMessage.textContent = message;
            responseContainer.style.display = 'block';
        }

        // å¯¼èˆªæŒ‰é’®è·³è½¬å‡½æ•°
        function navigateTo(url) {
            window.location.href = url;
        }
        
        // ä¸ºè¡¨å•1çš„ä¸‹æ‹‰æ¡†æ·»åŠ äº‹ä»¶ç›‘å¬
        document.getElementById('keywordSelect1').addEventListener('change', function() {
            const selectedValue = this.value;
            if (selectedValue) {
                document.getElementById('body1').value = selectedValue;
            }
        });
        
        // ä¸ºè¡¨å•2çš„ä¸‹æ‹‰æ¡†æ·»åŠ äº‹ä»¶ç›‘å¬
        document.getElementById('keywordSelect2').addEventListener('change', function() {
            const selectedValue = this.value;
            if (selectedValue) {
                document.getElementById('body2').value = selectedValue;
            }
        });
        
        // é¡µé¢åŠ è½½å®Œæˆåï¼Œä¸ºæ‰€æœ‰è¡¨å•çš„sbidè¾“å…¥æ¡†è®¾ç½®å€¼
        window.addEventListener('load', function() {
            // è·å–URLä¸­çš„sbidå‚æ•°å€¼ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä½¿ç”¨noid
            const sbidValue = getSbidFromUrl();
            
            // è®¾ç½®æ‰€æœ‰è¡¨å•çš„sbidè¾“å…¥æ¡†å€¼
            document.getElementById('sbid1').value = sbidValue;
            document.getElementById('sbid2').value = sbidValue;
            document.getElementById('sbid3').value = sbidValue;
        });

        // è·å–URLä¸­çš„sbidå‚æ•°å€¼ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿”å›noid
        function getSbidFromUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('sbid') || 'noid';
        }

        // æ–°å¢ï¼šäºŒç»´ç æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        document.getElementById('showQrcodeBtn').addEventListener('click', function() {
            document.getElementById('qrcodeOverlay').style.display = 'flex';
        });

        // æ–°å¢ï¼šç‚¹å‡»æ‚¬æµ®å±‚å¤–éƒ¨å…³é—­äºŒç»´ç 
        document.getElementById('qrcodeOverlay').addEventListener('click', function(e) {
            // å¦‚æœç‚¹å‡»çš„æ˜¯æ‚¬æµ®å±‚æœ¬èº«ï¼ˆè€Œä¸æ˜¯å†…éƒ¨çš„äºŒç»´ç å®¹å™¨ï¼‰
            if (e.target === this) {
                this.style.display = 'none';
            }
        });
    </script>
</body>
</html>
